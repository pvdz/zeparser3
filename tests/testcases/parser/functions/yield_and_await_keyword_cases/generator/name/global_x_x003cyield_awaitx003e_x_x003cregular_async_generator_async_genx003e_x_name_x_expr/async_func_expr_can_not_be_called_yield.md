# ZeParser parser test case

- Added: 2019-06-17 (mass migration from old system)
- Modified: -
- Path: zeparser3/tests/testcases/parser/functions/yield_and_await_keyword_cases/generator/name/global_x_x003cyield_awaitx003e_x_x003cregular_async_generator_async_genx003e_x_name_x_expr/async_func_expr_can_not_be_called_yield.md

> :: functions : yield and await keyword cases : generator : name : global x <yield, await> x <regular, async, generator, async gen> x name x expr
>
> ::> async func expr can not be called yield
>
> barring exceptions -- for all functions and methods goes:
>
> - name of the func keeps outer scope await/yield state. exception: function expressions clear it.
> - args and body explicitly set it according to the type of this function (so async sets await clears yield, etc)
>
> This means you can use `await` as a function name as long as you are not in strict mode and not already inside an async function and it's okay if the function whose name is being defined is actually async itself.
>
> the cases to test are a cross product of:
>
> - `<global, inside async, inside generator>` 
> - `x` 
> - `<yield, await>`
> - `x` 
> - `<regular, async, generator, async gen>`
> - `x` 
> - `<name, arg-name, arg-default, body>`
> - `x`
> - `<class method, obj method, decl, expr, default>`

## Input

`````js
function *as(){ let f = async function yield() {} }
`````

## Output

_Note: the whole output block is auto-generated. Manual changes will be overwritten!_

Below follow outputs in four parsing modes: sloppy mode, strict mode script goal, module goal, web compat mode (always sloppy).

Note that the output parts are auto-generated by the test runner to reflect actual result.

### Sloppy mode

Parsed with script goal and as if the code did not start with strict mode header.

`````
ast: {
  type: 'Program',
  loc: { start: { line: 1, col: 0 }, end: { line: 1, col: 51 } },
  body: [
    {
      type: 'FunctionDeclaration',
      loc: {
        start: { line: 1, col: 0 },
        end: { line: 1, col: 51 },
        source: ''
      },
      generator: true,
      async: false,
      id: {
        type: 'Identifier',
        loc: {
          start: { line: 1, col: 10 },
          end: { line: 1, col: 10 },
          source: ''
        },
        name: 'as'
      },
      params: [],
      body: {
        type: 'BlockStatement',
        loc: {
          start: { line: 1, col: 14 },
          end: { line: 1, col: 51 },
          source: ''
        },
        body: [
          {
            type: 'VariableDeclaration',
            loc: {
              start: { line: 1, col: 20 },
              end: { line: 1, col: 50 },
              source: ''
            },
            kind: 'let',
            declarations: [
              {
                type: 'VariableDeclarator',
                loc: {
                  start: { line: 1, col: 20 },
                  end: { line: 1, col: 50 },
                  source: ''
                },
                id: {
                  type: 'Identifier',
                  loc: {
                    start: { line: 1, col: 20 },
                    end: { line: 1, col: 20 },
                    source: ''
                  },
                  name: 'f'
                },
                init: {
                  type: 'FunctionExpression',
                  loc: {
                    start: { line: 1, col: 30 },
                    end: { line: 1, col: 50 },
                    source: ''
                  },
                  generator: false,
                  async: true,
                  id: {
                    type: 'Identifier',
                    loc: {
                      start: { line: 1, col: 39 },
                      end: { line: 1, col: 39 },
                      source: ''
                    },
                    name: 'yield'
                  },
                  params: [],
                  body: {
                    type: 'BlockStatement',
                    loc: {
                      start: { line: 1, col: 47 },
                      end: { line: 1, col: 50 },
                      source: ''
                    },
                    body: []
                  }
                }
              }
            ]
          }
        ]
      }
    }
  ]
}

tokens (19x):
       IDENT PUNCTUATOR IDENT PUNCTUATOR PUNCTUATOR PUNCTUATOR IDENT
       IDENT PUNCTUATOR IDENT IDENT IDENT PUNCTUATOR PUNCTUATOR
       PUNCTUATOR PUNCTUATOR ASI PUNCTUATOR
`````

### Strict mode

Parsed with script goal but as if it was starting with `"use strict"` at the top.

`````
throws: Parser error!
  Cannot use this name (yield) as a variable name because: Cannot use this reserved word as a variable name in strict mode

function *as(){ let f = async function yield() {} }
                                       ^------- error
`````


### Module goal

Parsed with the module goal.

_Output same as strict mode._

### Web compat mode

Parsed in sloppy script mode but with the web compat flag enabled.

_Output same as sloppy mode._
